# Acceso a bases de datos desde lenguajes de «script» de servidor
- Integración de los lenguajes de «script» de servidor con los sistemas gestores de bases de datos.
- Conexión a bases de datos. Acceso mediante funciones nativas. Acceso mediante ODBC (Open DataBase Connectivity).
- Creación de bases de datos y tablas.
- Creación de vistas. Creación de procedimientos almacenados.
- Recuperación de la información de la base de datos desde una página web.
- Modificación de la información almacenada: inserciones, actualizaciones y borrados.
- Verificación de la información.
- Gestión de errores.
- Verificación del funcionamiento y pruebas de rendimiento.
- Mecanismos de seguridad y control de accesos.
- Documentación. 

---------------------

# PHP

## Conexión bases de datos
* https://www.php.net/manual/es/set.mysqlinfo.php

## Ejemplo #1 Comparación de las tres API de MySQL

```PHP
<?php
// mysqli
$mysqli = new mysqli("ejemplo.com", "usuario", "contraseña", "basedatos");
$resultado = $mysqli->query("SELECT '¡Hola, querido usuario de MySQL!' AS _message FROM DUAL");
$fila = $resultado->fetch_assoc();
echo htmlentities($fila['_message']);

// PDO
$pdo = new PDO('mysql:host=ejemplo.com;dbname=basedatos', 'usuario', 'contraseña');
$sentencia = $pdo->query("SELECT '¡Hola, querido usuario de MySQL!' AS _message FROM DUAL");
$fila = $sentencia->fetch(PDO::FETCH_ASSOC);
echo htmlentities($fila['_message']);

// mysql
$c = mysql_connect("ejemplo.com", "usuario", "contraseña");
mysql_select_db("basedatos");
$resultado = mysql_query("SELECT '¡Hola, querido usuario de MySQL!' AS _message FROM DUAL");
$fila = mysql_fetch_assoc($resultado);
echo htmlentities($fila['_message']);
?>
```

## Ejercicio 1. Leer un valor de una tabala y mostrarlo

### Contenido de la base de datos (importar.sql)
```SQL
-- phpMyAdmin SQL Dump
-- version 3.4.5
-- http://www.phpmyadmin.net
--
-- Servidor: localhost
-- Tiempo de generación: 14-09-2012 a las 17:03:15
-- Versión del servidor: 5.5.16
-- Versión de PHP: 5.3.8

SET SQL_MODE="NO_AUTO_VALUE_ON_ZERO";
SET time_zone = "+00:00";


/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;

--
-- Base de datos: `p001`
--
CREATE DATABASE `p001` DEFAULT CHARACTER SET utf8 COLLATE utf8_spanish_ci;
USE `p001`;

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `encabezados`
--

CREATE TABLE IF NOT EXISTS `encabezados` (
  `codigo` int(11) NOT NULL AUTO_INCREMENT,
  `texto` varchar(30) COLLATE utf8_spanish_ci NOT NULL,
  PRIMARY KEY (`codigo`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_spanish_ci AUTO_INCREMENT=2 ;

--
-- Volcado de datos para la tabla `encabezados`
--

INSERT INTO `encabezados` (`codigo`, `texto`) VALUES
(1, 'Hasta luego');

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
``` 

### Fichero de configuración (datos.ini)

```PHP
baseDeDatos="mysql:host=localhost;dbname=p001;charset=utf8"
usuario="root"
password="root"
```

### Fichero PHP (index.php)

```PHP
<!DOCTYPE html>
<html>

<head>
	<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
	<title>P001</title>
</head>

<body>
	<?php
		$base = parse_ini_file("./ini/datos.ini");
		$php = new PDO($base["baseDeDatos"],$base["usuario"],$base["password"]);
		$con = $php->prepare("SELECT * from encabezados;");
		$con->execute();
		$registros = $con->fetchAll(PDO::FETCH_NUM);
		$php = null;
		
		$n = count($registros);
		$texto = $registros[0][1];
	?>
	<h1><?php echo "$texto"; ?></h1>
</body>

</html>
```
